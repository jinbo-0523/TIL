１、ネットワークの基礎知識
コンピューターとネットワーク
サイズ別ネットワーク
①PC単体のネットワーク設定(小)
②家庭やオフィスとのネットワーク(中)
③インターネット(大)

ネットワークについて学ぶ時の心構え
ネットワーク自体は端的に言えばWebアプリとWebアプリをつないでデータのやりとりを出来るようにする事。そのために方法・手順・ルールが細かく決められているだけ。

通信プロトコル
コンピューターが従うべきルールのこと
①データ形式②通信手順で決められる。
IETEという標準化団体が策定、RFCという英語文書で公開されていえる。

レイヤー
共通の機能から順に積み上げられていく『層』

OSI参照モデル
コンピューターネットワークに求められる機能を７つの階層び整理した物
レイヤー７　アプリケーション層　　→　アプリケーションプログラム
レイヤー６　プレゼンテーション層　→　アプリケーションプログラム
レイヤー５　セッション層　　　　　→　アプリケーションプログラム
レイヤー４　トランスポート層　　　→　（TCP処理　　UDP処理）モジュール
レイヤー３　ネットワーク層　　　　→　IP処理モジュール
レイヤー２　データリンク層　　　　→　イーサネット制御モジュール
レイヤー１　物理層　　　　　　　　→　イーサネットハードウェア

この7層の下から使われていき、上の層は下の層を使って次の機能を実現していく。これを作り上げていくことを『ネットワークアーキテクチャ(インフラの求人とかに書いてあるやつ)』という


・TCPとUDP
どちらも通信チャネル(ポート)の提供・通信管理がL4(トランスポート層)のプロトコル。
同じIPアドレスでもポート番号が違ければ違うサービスの提供のなる。
TCPは高信頼性で通信効率の最適化機能を持つ分、負荷が大きい。UDPは信頼性が低いものの、処理が高速で行える。
TCP = 信頼性 > 速度
UDP =  速度 > 信頼性


LANとWAN
LAN(ローカルエリアネットワーク)は企業や家庭などの一つの拠点でのネットワークを指し、WAN(ワイドエリアネットワークはその拠点間を結ぶネットワークを指す。


インターネットワーキングの概念
コンピューターを接続したネットワークを複数繋げ合うことをインターネットワーキングという。
通信にはTCP/IPネットワークではIP(インターネットプロトコル)が機能を受け持つ。
個々のネットワークが別々にネットワークアドレスをもちそれを元にルーティングで通信をする。



インターネット接続を構成する要素
家庭や企業のネットワークはONU(光終端末)を通じて通信事業者の局舎につながる。
データを受信する時はONUによって各コンピューター宛のデータのみ取り出して復号化してパソコンに表示させる。送信時は他の端末との送信の衝突により通信が非効率化してしまうのを回避する機能がある。具体的には、局舎にタイミングとデータ量を送信して局舎から他の回線と衝突しないタイミングが返信されてくる。
”振り分け”と”回避して送信”


・ISP(インターネット接続窓口みたいな)
光回線の先にはISPとの接続部がある。ISPには大手ISP(１次ISP)、それに接続する２次ISP、さらにそこに接続する３次ISPなどがある。
ISPとインターネットの大元である米国のデータセンターにつながること、ISP同士が接続状態にある時にでインターネットが使用することができる。




企業ネットワークの構成
企業のネットワークは拠点が複数になることが多く複雑になりがち(本社と視点や、OO事業所など)。その場合WANを使用する。その一つとして『広域イーサネットサービス』がある。イーサネットの延長として使用できるため特別な機器が必要ない上にセキュリティも確保されており安全。デメリットは費用面で高額になること。

安価に済ませたい場合、インターネットVPNを使用する。VPNは土台となるネットワークの中に別のネットワークを仮想的に作り出すこと。安価な分広域イーサネットにはセキュリティや速度が劣る

【おさらい】
イーサネットとは、ネットワークやコンピューター間での通信モデル TCP/IPプロトコルのネットワークインターフェース層に対応する有線の規格


クライアントサーバーとピアツーピア
クライアントサーバー型
クライアントとサーバーのふたつに分けて処理を行う。メインの処理をサーバー、単純な処理はクライアントが行う事でシステム全体の価格を下げられるメリットと保守の重点をサーバーに集中させることができる。デメリットとしてはサーバーを一度経由するため処理速度が落ちやすい。

ピアツーピア型（P2P型）
クライアントサーバーと違い、固定的な役割を持たせないのがピアツーピア型。
相互に処理するため、1台が故障してもネットワーク機能が麻痺するようなことはない。デメリットは個々のコンピューターに高い処理能力が求められるところで、処理量が少ない場合で用いられることが多い。(LINEはP2P型が用いられている)


回線交換とパケット通信
交換とは、相手にデータを送り出すことをいう。
回線交換は送りたい相手と回線をつなげることでデータを送ること。何も送ることがないときは回線を遊ばせてしまうことになるが、繋げた相手とは占有状態になる。

パケット交換は送りたいデータをパケットという物に小分けにしてヘッダを付与して送信する形式。通信は他の回線と共用のため利用効率を高められる。

【おさらい：パケット】
パケット => ヘッダ + ペイロード


二進数
私たちが普段使う０〜９で表す方法を十進数という。コンピューターは電流や電圧の有無で情報を表すため二進数を使う。十進数同様、表示できない物は桁が一つ上がる。二進数では『０』は０、『１』は１、『２』は10、『３』は11、『４』は100となる


十六進数
二進数だと表記が長くなってしまうため使われるのが十六進数。十六進数は二進数の4桁分に対応するため、二進数の書き換えに使われる。
表記には0〜9、A〜Fが使われる。


２、TCP/IPの基礎知識
TCP/IPのレイヤー構成
TCP/IPはセットで呼ばれるがそれぞれ別のプロトコル（TCP：トランス コントロール プロトコル、IP：インターネット プロトコル）で４層のモデルに基づいて構成される。
①アプリケーション層・・・個別のアプリケーションの機能を実現する。プロトコルはHTTP、SMTP、POP3。
②トランスポート層・・・インターネット層の通信機能を使って目的に応じた通信制御を実現。プロトコルはTCP、UDP。
③インターネット層・・・④で実現した機能に中継の機能を付け加えて、繋がっていない相手とも通信できる機能を実現する。プロトコルはIP。
④ネットワークインターフェース層・・・直接繋がった相手をの通信を実現。物理的な装置も含まれる


OSI参照モデルとの対応
OSI参照モデルはTCP/IPと同様にネットワークアーキテクチャの一つだがTCP/IPに比べて複雑だったため普及しなかった。
ただしOSIはネットワークを学習するには有効的で、理解を深めるに役に立つ
OSIとTCP/IPをそれぞれ対応させると以下のようになる。

OSI参照モデル　　　　　　　　　　　　TCP/IPモデル
レイヤー７　アプリケーション層　　→　アプリケーション層
レイヤー６　プレゼンテーション層　→　アプリケーション層
レイヤー５　セッション層　　　　　→　アプリケーション層
レイヤー４　トランスポート層　　　→　トランスポート層
レイヤー３　ネットワーク層　　　　→　インターネット層
レイヤー２　データリンク層　　　　→　ネットワークインターフェース層
レイヤー１　物理層　　　　　　　　→　ネットワークインターフェース層


ネットワークインターフェース層の役割
物理的に繋がったコンピューター同士の通信を実現しているシンプルな構造でプロトコルはイーサネット

ハードウェアごとにアドレスがある
それをハードウェアアドレスと言う。
イーサネットやWi-Fiにもアドレスがあり、MACアドレスという。
このアドレスを上位層で使われるIPアドレスと対応付ける役割もネットワークインターフェース層の機能であり、IPアドラスからMACアドレスを得るプロトコルがARP、その逆がRARP。


インターネット層の役割
複数のネットワークを繋ぎ、パケットを中継するのが役割。
①パケットを中継して所定の方向に転送する機能をルーティングと呼ぶ。
②接続するコンピューターにアドレスを付与する事。
プロトコルはIP。アドレスを付与していくにあたって、重複が許されないため、重複なく効率的に割り振らなければならない。現在主流であるIPv4と、これから普及していくとみられるIPv6がある


トランスポート層の役割
インターネット層で作り出した通信機能をベースにしてネットワークの使用目的に応じた特性を持つ通信を実現するのが役割。
プロトコルはTCPとUDP。
特性は前述


信頼性を実現するTCPの通信手順
TCPでは相手の応答があろうとなかろうと一定までデータを勝手に送るという方法を採用しスライディングウィンドウと呼ばれる仕組みを使用している。また信頼性を高めるために6つの処理を行っている。
①シーケンス番号
②謝り検出
③肯定確認応答
④スライディングウィンドウ
⑤フロー制御
⑥輻輳(1か所に集中し混雑する様態の)制御

スライディングウィンドウ・・・一定範囲までは受信確認を待たずに送信、受信確認が帰ってきた段階で範囲をずらして再送を行う

通信手順は3ウェイハンドシェイクという方法を採用している。
まず接続したい方がSYNパケットを相手に送り、相手からSYN＋ACKパケットが返ってくたら、さらにACKパケットを送る事で接続が正常にできたとみなす方式。



アプリケーション層の役割
アプリケーション層は特徴がないのが特徴の層。代わりにアプリケーションごとに違うし数も多い。その中でも特に使われるのが以下の機能。
・Webへのアクセス『HTTP』
・メールの送信に用いる『SMTP』
・メールの読み出しに用いる『POP3』や『IMAP4』
・ファイルの転送『FTP』
・名前解決『DNS』
・時計合わせ『NTP』
・文字ベースでコマンドを送り結果を見る『SSH』


レイヤー毎の処理とパケットの関係
データ送信時、データにヘッダをつけ下位層に送る。送られてきたヘッダ付きのデータにさらにヘッダをつけてさらに下層に送って行く。なので下位に行くほどパケットの量は増えていく事になる。
受信時はヘッダを元に通信処理を行ったあとヘッダを取り除き上位層へ送る、これを最上位層まで行う事で最終的にはもともとのデータと同じになる。


IPアドレス
IPアドレスとは各コンピューターを識別するために付与される番号の列。
現在はIPv4の数が枯渇しそうであるためIPv6が新しく導入されることになった。
IPアドレスは世界規模で重複できないので番号割り振りにルールがある。IPアドレスを管理はICANN(アイキャン)が管理しており①地域インターネットレジストリ(世界を5つの地域に分けたもの)、②国別インターネットレジストリ(①の中に含まれる8つの国)、③ローカルインターネットレジストリ(国内のインターネットプロバイダ)にそれぞれ0〜255の番号を割り振る
（例：203.0.113.43、192.168.1.3などドットで区切る）

・IPv4は32ビットのデータとして表現、IPv4のアドレス総数は2の32乗個＝42億9496万7296個＝最大約43億台分のコンピューターに番号を割り振ることができる
・IPv6ではIPアドレスを128ビットのデータとして表現、アドレス総数は3.4×10の38乗個、＝約340澗（かん、1京の5桁上）個となります。これは事実上無限と言える数
