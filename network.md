１、ネットワークの基礎知識
コンピューターとネットワーク
サイズ別ネットワーク
①PC単体のネットワーク設定(小)
②家庭やオフィスとのネットワーク(中)
③インターネット(大)

ネットワークについて学ぶ時の心構え
ネットワーク自体は端的に言えばWebアプリとWebアプリをつないでデータのやりとりを出来るようにする事。そのために方法・手順・ルールが細かく決められているだけ。

通信プロトコル
コンピューターが従うべきルールのこと
①データ形式②通信手順で決められる。
IETEという標準化団体が策定、RFCという英語文書で公開されていえる。

レイヤー
共通の機能から順に積み上げられていく『層』

OSI参照モデル
コンピューターネットワークに求められる機能を７つの階層び整理した物
レイヤー７　アプリケーション層　　→　アプリケーションプログラム
レイヤー６　プレゼンテーション層　→　アプリケーションプログラム
レイヤー５　セッション層　　　　　→　アプリケーションプログラム
レイヤー４　トランスポート層　　　→　（TCP処理　　UDP処理）モジュール
レイヤー３　ネットワーク層　　　　→　IP処理モジュール
レイヤー２　データリンク層　　　　→　イーサネット制御モジュール
レイヤー１　物理層　　　　　　　　→　イーサネットハードウェア

この7層の下から使われていき、上の層は下の層を使って次の機能を実現していく。これを作り上げていくことを『ネットワークアーキテクチャ(インフラの求人とかに書いてあるやつ)』という


・TCPとUDP
どちらも通信チャネル(ポート)の提供・通信管理がL4(トランスポート層)のプロトコル。
同じIPアドレスでもポート番号が違ければ違うサービスの提供のなる。
TCPは高信頼性で通信効率の最適化機能を持つ分、負荷が大きい。UDPは信頼性が低いものの、処理が高速で行える。
TCP = 信頼性 > 速度
UDP =  速度 > 信頼性


LANとWAN
LAN(ローカルエリアネットワーク)は企業や家庭などの一つの拠点でのネットワークを指し、WAN(ワイドエリアネットワークはその拠点間を結ぶネットワークを指す。


インターネットワーキングの概念
コンピューターを接続したネットワークを複数繋げ合うことをインターネットワーキングという。
通信にはTCP/IPネットワークではIP(インターネットプロトコル)が機能を受け持つ。
個々のネットワークが別々にネットワークアドレスをもちそれを元にルーティングで通信をする。



インターネット接続を構成する要素
家庭や企業のネットワークはONU(光終端末)を通じて通信事業者の局舎につながる。
データを受信する時はONUによって各コンピューター宛のデータのみ取り出して復号化してパソコンに表示させる。送信時は他の端末との送信の衝突により通信が非効率化してしまうのを回避する機能がある。具体的には、局舎にタイミングとデータ量を送信して局舎から他の回線と衝突しないタイミングが返信されてくる。
”振り分け”と”回避して送信”


・ISP(インターネット接続窓口みたいな)
光回線の先にはISPとの接続部がある。ISPには大手ISP(１次ISP)、それに接続する２次ISP、さらにそこに接続する３次ISPなどがある。
ISPとインターネットの大元である米国のデータセンターにつながること、ISP同士が接続状態にある時にでインターネットが使用することができる。




企業ネットワークの構成
企業のネットワークは拠点が複数になることが多く複雑になりがち(本社と視点や、OO事業所など)。その場合WANを使用する。その一つとして『広域イーサネットサービス』がある。イーサネットの延長として使用できるため特別な機器が必要ない上にセキュリティも確保されており安全。デメリットは費用面で高額になること。

安価に済ませたい場合、インターネットVPNを使用する。VPNは土台となるネットワークの中に別のネットワークを仮想的に作り出すこと。安価な分広域イーサネットにはセキュリティや速度が劣る

【おさらい】
イーサネットとは、ネットワークやコンピューター間での通信モデル TCP/IPプロトコルのネットワークインターフェース層に対応する有線の規格


クライアントサーバーとピアツーピア
クライアントサーバー型
クライアントとサーバーのふたつに分けて処理を行う。メインの処理をサーバー、単純な処理はクライアントが行う事でシステム全体の価格を下げられるメリットと保守の重点をサーバーに集中させることができる。デメリットとしてはサーバーを一度経由するため処理速度が落ちやすい。

ピアツーピア型（P2P型）
クライアントサーバーと違い、固定的な役割を持たせないのがピアツーピア型。
相互に処理するため、1台が故障してもネットワーク機能が麻痺するようなことはない。デメリットは個々のコンピューターに高い処理能力が求められるところで、処理量が少ない場合で用いられることが多い。(LINEはP2P型が用いられている)


回線交換とパケット通信
交換とは、相手にデータを送り出すことをいう。
回線交換は送りたい相手と回線をつなげることでデータを送ること。何も送ることがないときは回線を遊ばせてしまうことになるが、繋げた相手とは占有状態になる。

パケット交換は送りたいデータをパケットという物に小分けにしてヘッダを付与して送信する形式。通信は他の回線と共用のため利用効率を高められる。

【おさらい：パケット】
パケット => ヘッダ + ペイロード


二進数
私たちが普段使う０〜９で表す方法を十進数という。コンピューターは電流や電圧の有無で情報を表すため二進数を使う。十進数同様、表示できない物は桁が一つ上がる。二進数では『０』は０、『１』は１、『２』は10、『３』は11、『４』は100となる


十六進数
二進数だと表記が長くなってしまうため使われるのが十六進数。十六進数は二進数の4桁分に対応するため、二進数の書き換えに使われる。
表記には0〜9、A〜Fが使われる。


２、TCP/IPの基礎知識
TCP/IPのレイヤー構成
TCP/IPはセットで呼ばれるがそれぞれ別のプロトコル（TCP：トランス コントロール プロトコル、IP：インターネット プロトコル）で４層のモデルに基づいて構成される。
①アプリケーション層・・・個別のアプリケーションの機能を実現する。プロトコルはHTTP、SMTP、POP3。
②トランスポート層・・・インターネット層の通信機能を使って目的に応じた通信制御を実現。プロトコルはTCP、UDP。
③インターネット層・・・④で実現した機能に中継の機能を付け加えて、繋がっていない相手とも通信できる機能を実現する。プロトコルはIP。
④ネットワークインターフェース層・・・直接繋がった相手をの通信を実現。物理的な装置も含まれる


OSI参照モデルとの対応
OSI参照モデルはTCP/IPと同様にネットワークアーキテクチャの一つだがTCP/IPに比べて複雑だったため普及しなかった。
ただしOSIはネットワークを学習するには有効的で、理解を深めるに役に立つ
OSIとTCP/IPをそれぞれ対応させると以下のようになる。

OSI参照モデル　　　　　　　　　　　　TCP/IPモデル
レイヤー７　アプリケーション層　　→　アプリケーション層
レイヤー６　プレゼンテーション層　→　アプリケーション層
レイヤー５　セッション層　　　　　→　アプリケーション層
レイヤー４　トランスポート層　　　→　トランスポート層
レイヤー３　ネットワーク層　　　　→　インターネット層
レイヤー２　データリンク層　　　　→　ネットワークインターフェース層
レイヤー１　物理層　　　　　　　　→　ネットワークインターフェース層


ネットワークインターフェース層の役割
物理的に繋がったコンピューター同士の通信を実現しているシンプルな構造でプロトコルはイーサネット

ハードウェアごとにアドレスがある
それをハードウェアアドレスと言う。
イーサネットやWi-Fiにもアドレスがあり、MACアドレスという。
このアドレスを上位層で使われるIPアドレスと対応付ける役割もネットワークインターフェース層の機能であり、IPアドラスからMACアドレスを得るプロトコルがARP、その逆がRARP。


インターネット層の役割
複数のネットワークを繋ぎ、パケットを中継するのが役割。
①パケットを中継して所定の方向に転送する機能をルーティングと呼ぶ。
②接続するコンピューターにアドレスを付与する事。
プロトコルはIP。アドレスを付与していくにあたって、重複が許されないため、重複なく効率的に割り振らなければならない。現在主流であるIPv4と、これから普及していくとみられるIPv6がある


トランスポート層の役割
インターネット層で作り出した通信機能をベースにしてネットワークの使用目的に応じた特性を持つ通信を実現するのが役割。
プロトコルはTCPとUDP。
特性は前述


信頼性を実現するTCPの通信手順
TCPでは相手の応答があろうとなかろうと一定までデータを勝手に送るという方法を採用しスライディングウィンドウと呼ばれる仕組みを使用している。また信頼性を高めるために6つの処理を行っている。
①シーケンス番号
②謝り検出
③肯定確認応答
④スライディングウィンドウ
⑤フロー制御
⑥輻輳(1か所に集中し混雑する様態の)制御

スライディングウィンドウ・・・一定範囲までは受信確認を待たずに送信、受信確認が帰ってきた段階で範囲をずらして再送を行う

通信手順は3ウェイハンドシェイクという方法を採用している。
まず接続したい方がSYNパケットを相手に送り、相手からSYN＋ACKパケットが返ってくたら、さらにACKパケットを送る事で接続が正常にできたとみなす方式。



アプリケーション層の役割
アプリケーション層は特徴がないのが特徴の層。代わりにアプリケーションごとに違うし数も多い。その中でも特に使われるのが以下の機能。
・Webへのアクセス『HTTP』
・メールの送信に用いる『SMTP』
・メールの読み出しに用いる『POP3』や『IMAP4』
・ファイルの転送『FTP』
・名前解決『DNS』
・時計合わせ『NTP』
・文字ベースでコマンドを送り結果を見る『SSH』


レイヤー毎の処理とパケットの関係
データ送信時、データにヘッダをつけ下位層に送る。送られてきたヘッダ付きのデータにさらにヘッダをつけてさらに下層に送って行く。なので下位に行くほどパケットの量は増えていく事になる。
受信時はヘッダを元に通信処理を行ったあとヘッダを取り除き上位層へ送る、これを最上位層まで行う事で最終的にはもともとのデータと同じになる。


IPアドレス
IPアドレスとは各コンピューターを識別するために付与される番号の列。
現在はIPv4の数が枯渇しそうであるためIPv6が新しく導入されることになった。
IPアドレスは世界規模で重複できないので番号割り振りにルールがある。IPアドレスを管理はICANN(アイキャン)が管理しており①地域インターネットレジストリ(世界を5つの地域に分けたもの)、②国別インターネットレジストリ(①の中に含まれる8つの国)、③ローカルインターネットレジストリ(国内のインターネットプロバイダ)にそれぞれ0〜255の番号を割り振る
（例：203.0.113.43、192.168.1.3などドットで区切る）

・IPv4は32ビットのデータとして表現、IPv4のアドレス総数は2の32乗個＝42億9496万7296個＝最大約43億台分のコンピューターに番号を割り振ることができる
・IPv6ではIPアドレスを128ビットのデータとして表現、アドレス総数は3.4×10の38乗個、＝約340澗（かん、1京の5桁上）個となります。これは事実上無限と言える数



IPアドレス
IPアドレスとは各コンピューターを識別するために付与される番号の列。
現在はIPv4の数が枯渇しそうであるためIPv6が新しく導入されることになった。
IPアドレスは世界規模で重複できないので番号割り振りにルールがある。IPアドレスを管理はICANN(アイキャン)が管理しており①地域インターネットレジストリ(世界を5つの地域に分けたもの)、②国別インターネットレジストリ(①の中に含まれる8つの国)、③ローカルインターネットレジストリ(国内のインターネットプロバイダ)にそれぞれ0〜255の番号を割り振る（例：203.0.113.43、192.168.1.3などドットで区切る）

・IPv4は32ビットのデータとして表現、IPv4のアドレス総数は2の32乗個＝42億9496万7296個＝最大約43億台分のコンピューターに番号を割り振ることができる
・IPv6ではIPアドレスを128ビットのデータとして表現、アドレス総数は3.4×10の38乗個、＝約340澗（かん、1京の5桁上）個となります。これは事実上無限と言える数


ポート番号
通信相手が複数の機能を持つ時、どの機能と接続するかを指定するために使う。IPアドレスとポート番号を指定する事でコンピューターの機能を指定することができる。①通信相手のIPアドレス、②相手のポート番号、③自分のIPアドレス、④自分のポート番号が揃う事で通信ができるようになる。

・ウェルノウンポート
主要なアプリケーションごとに0〜1023までのポート番号が割り振られているもの。
ポート番号自体は0〜65535まで番号がある。

80　webへのアクセス
443　暗号化したwebへのアクセス
110　メールボックスの読み出し
143　メールボックスのアクセス
25　サーバー間のメール転送
587　パソコンからのメールサーバーへのメール送信
20　ファイル転送(データ転送用)
21　ファイル転送(制御用)		など


グローバルIPとプライベートIP
世界規模で重複しないことが前提となるIPアドレスをグローバルIPアドレスという。そうでないものをプライベートIPアドレスといい、組織や家庭などの内部ネットワークで使用する。各ネットワークで使うものなので他のネットワークとIPアドレスが重複できる。
クラスA　企業向け　　　　　10.0.0.0　〜　10.255.255.255
クラスB　企業向け　　　　　172.16.0.0　〜　172.31.255.255
クラスC　家庭やSOHO向け　192.168.0.0　〜　192.168.255.255

IPv4は枯渇の恐れがあるので今後IPv6に移行していくことになるがIPv6を使うインターネットは現在の物と全く違うものになる。そのためそちらに繋がるサイトがまだ少ないこと、IPv6に対応できる機器が必要になる事から移行には時間がかかる



IPアドレスのクラスとネットマスク
IPアドレスの左側を『ネットワーク部』、右側を『ホスト部』という。
ネットワーク部がネットワークの特定に使われ、ホスト部がそのネットワーク内のコンピューターを特定する役割を持つ。
IPアドレスには『クラス』の概念があり。クラスA〜Eまである。クラスD、Eは特殊なため普段使われるのはA〜Cクラスとなっている。A〜Cのクラスの違いは繋げられるコンピューターの台数の違いとなる。
・クラスの違い
クラスA・・・左(つまりネットワーク部)から8ビット(8桁)使うので128のネットワークで約1600万台に接続できる
クラスB・・・左(つまりネットワーク部)から16ビット(16桁)使うので約1600のネットワークで6万5千台に接続できる
クラスC・・・左(つまりネットワーク部)から24ビット(24桁)使うので200万のネットワークで254台に接続できる
このためクラスAは企業向け(ネットワークが少なくて台数が多い)でクラスCは家庭・SOHO向けとなる

→SOHO・・・パソコンなどの情報通信機器を利用して、小さなオフィスや自宅で、受託した委託業務を行う働き方、またはその仕事場や物件の事

・ネットマスク
ネットワークの部とホスト部が知りたいときに使うのが『ネットマスク』で、左のネットワーク部の全部が『１』にしたビット列の事で、1の羅列にAND演算を行うと()ネットワーク部を知ることができる。
例：
10010100　10000001
11111111　  11111111
🔽（1+1→1、1+0→1。0があるところは0になる）
10010100　10000001


サブネット化とサブネットマスク
組織のネットワークを大きい物から小さく小分けにすることがよくある。これはネットワーク内のの前コンピューターへの一斉送信できる範囲（ブロードキャスト）を限定すること、故障時の範囲を最小限に抑えることを目的としている。
小さなネットワークにすることをサブネット化と言う。IPアドレスのネットワーク部を伸ばしてホスト部を縮める。ただし、ネットワークを増やすと接続できる台数が減ることになるので注意が必要

ブロードキャストとマルチキャスト
同じイーサネットに接続している全てのコンピューターにデータを送る通信をブロードキャストという。反対に１対１で通信することをユニキャストと言う。
ブロードキャストを行うには、①255.255.255.255の『リミテッドブロードキャストアドレス』にパケットを送る、②ホスト部が全て１のディレクテッドブロードキャストアドレスにパケットを送るかの２通りになる。
①はルーターで接続された他のネットワークには送られないが、②はルーターを経由するため他のネットワークにも送られてしまうので一般にはルーターの経由を禁止することが推奨されている。

・マルチキャスト
同じネットワーク内のコンピューターの中でも送り先を選択できるのがマルチキャストで、動画・音声の配信やテレビ会議などに使われる。ただし送る相手のルーターがこれに対応していないと配信などは行えない。





ハブ／スイッチの役割
ハブ／スイッチを使うことでイーサネットの新設と拡張ができる。
ハブ・・・データ転送機能のみ有している。同じネットワーク内にデータを転送、自分宛でないデータは破棄する仕組み
スイッチ・・・上記も含み、VLAN機能や各種管理機能(Web画面での設定・内部情報の読み出しなど)を持つ。送信相手のポートにのみデータを送信する仕組み
LANケーブルをつなぐ穴(ポート)がたくさん並んでいるのが特徴。

ルーターの役割と機能
レイヤー3(ネットワーク層)のプロトコル、IPでIPパケットを転送する働きをもち、イーサネットネットワークの間に入って、両者の間でパケットを中継する物。個々のネットワークがルーターを介す事でデータのやりとりを行うことができるようになる。



３、TCP/IPで通信するための仕組み
【おさらい】IPアドレス32ビット
可変長サブネットマスクとCIDR
近年ではサブネットマスクの長さを変える事ができるようになり、この技術を可変長サブネットマスクと言う。メリットはサブネット毎に接続するコンピューターの数を柔軟に決める事ができる。

・CIDR
可変長サブネットマスクをベースにネットワークアドレスをあえて短くする(左にズラす)事で、複数のネットワークに対する転送のルールをまとめる技術
例えるなら社員全員に送るか、各営業支店に個々に送信するかしかできなかったデータがくくり(＝ネットワークアドレス)を『営業部』として広げる(＝ネットワークアドレスを短縮する)事で転送を楽にする技術。


MACアドレス
物理アドレスとも言われ、イーサネットなどのハード1つずつに与えられるアドレス。00〜FFまでの16進数で表した値を６つに分けて表す。
例：AA-BB-CC-DD-EE
　　　　ベンダーID　　　機種ID　シリアルID　
ただし、MACアドレスは自由に書き換えられるので、必ずしもユニークになっているとは限らない。

・転送方法
現在主流のイーサネットはLANケーブルでハブ／スイッチに各コンピューターを接続する方法でこの形態ならハブ／スイッチがどのポートにどのMACアドレスを持つコンピューターかを記憶でき、適切なコンピューターにデータを送る事ができる。
※記憶するのはスイッチのみ


ARP(アープ)が必要なわけ
・動作概要
ブロードキャスト(一斉送信)を使う。IPアドレスをMACアドレスに変換して、ネットワーク内に送信、同じIPアドレスを使っていないか問い合わせ(ARPリクエストという)を行い、使っているコンピューターは自分のMACアドレスを一緒に返答(ARPリプライ)をする事でデータの送り先を確定させる。




ドメイン名
ICANNがTLD(トップレベルドメイン)を管理している。TLDには種類がいくつかあるが、その中でも一般的なのがgTLD(分野別に振り分け)とccTLD(国別に振り分け)の２種類あり、各TLDを管理してるのは委任された管理組織（レジストリ）が実質的な管理・運用をしている。
レジストリに申請するときの窓口としてレジストラ(レジストリに登録を行う業者の総称)がある。
例：
gTLD・・・.comや.net
ccTLD・・・.jpなど
www.aaaaaa.com
↓　　　↓　　　　　↓
↓　　　↓　　　　　→トップレベルドメイン
↓　　　→セカンドレベルドメイン
サードレベルドメイン

・登録の流れ
ICANNから管理運用を目的に契約したレジストリが、レジストラと登録・変更の申請などを行う目的で契約→さらに登録・変更の申請を目的にリセラと契約して登録者と、もしくはドメイン登録者が直接レジストラと契約。

ルーティングとデフォルトゲートウェイ
ルーターによる何をどこへ転送すればいいかを定めたルールにしたがって行われた転送を『ルーティング』という。またそのルールを定める重要な要素を『ルーティングテーブル』という。ルーティングテーブルには①宛先のネットワーク、②そのネットワークへの配送方法が登録されている。

・デフォルトゲートウェイ
デフォルトゲートウェイとは自分の接続しているネットワーク以外にパケットを送る際に、どこに送ればいいか情報を持っていないときに送る『とりあえず送る、送り先』のこと。通常、パケットのルーティングは全てルーターが行なっているのでデフォルトゲートウェイはそのネットワークのルーターを指す。



ルーティングとデフォルトゲートウェイ
ルーターによる何をどこへ転送すればいいかを定めたルールにしたがって行われた転送を『ルーティング』という。またそのルールを定める重要な要素を『ルーティングテーブル』という。ルーティングテーブルには①宛先のネットワーク、②そのネットワークへの配送方法が登録されている。

・デフォルトゲートウェイ
デフォルトゲートウェイとは自分の接続しているネットワーク以外にパケットを送る際に、どこに送ればいいか情報を持っていないときに送る『とりあえず送る、送り先』のこと。通常、パケットのルーティングは全てルーターが行なっているのでデフォルトゲートウェイはそのネットワークのルーターを指す。




スタティックルーティングとダイナミックルーティング
IPネットワーク内ではルーティングテーブルが非常に重要な役割を担うため、正確に管理しなければならない。
そのため管理の方法が２種類ある。
①スタティックルーティング
ネットワークの変更・追加により手を加える必要が出た際、手動で管理がスタティックルーティング。小規模なネットワークの管理に向いている。

②ダイナミックルーティング
ネットワーク同士でやりとりをし、自動で管理する方法をダイナミックルーティングという。ネットワークの追加があった場合隣接するルーターにその情報を送り、さらに隣接するルーターに送ることで自動で変更・追加をする管理方法。

ルーティングプロトコル
ダイナミックルーティングで使うプロトコルの事をルーティングプロトコルといい、①ルーター同士の経路情報の交換、②集めた情報経路から最適な経路の選出、があげられる。
またプロトコルには、IGP(インテリアゲートウェイプロトコル＝内部間)、EGP(エクステリアゲートウェイプロトコル＝外面)の大きく2種類がある。大規模ネットワークをAS(自律型システム)というが、IGPはASの内部でのルーティングに、
EGPはAS間(外部間＝現在はBGP【ボーダーゲートウェイプロトコル】とも言われる)のルーティングにそれぞれ利用される。

IGP→さらに種類がある
⑴RIP/RIP2・・・小規模ネットワークで使われるプロトコルで、導入・運用が簡単だが変更に時間がかかるのがデメリット
⑵OSPF・・・中規模以上のネットワークで使われるプロトコルで、RIP/RIP2よりも優秀だが、運用コストが高く、機器も安価な物だと対応していないことがある。



DHCPサーバー
ネットワークに接続したコンピューターに対して自動的に設定情報を配布する仕組み。
主な設定できる情報はIPアドレス、サブネットマスク、デフォルトゲートウェイ、DNSサーバーのIPアドレスなどがあげられる。
ネットワークに繋がったコンピューターに配布するため、ネットワークに繋がっていないものには利用できない。

・動作の流れ
①自身(DHCPクライアント)のIPが設定されていないのでDHCPサーバーに対して『私はだれ〜ここはどこ〜？』ってブロードキャストする（つまりDHCPサーバーに全送信）＝＞DHCPクライアントからDHCPサーバーへDHCPディスカバーをブロードキャスト
②DHCPサーバーから『君の名前はOOでXXにいるんじゃない？』って返ってくる＝＞DHCPサーバーからDHCPオファーが送信される
③『わかった、今度からXXのOOですって名乗ります』と返信が送られる＝＞DHCPリクエストをブロードーキャストする
④『わかった、よろしく〜』とDHCPサーバーから送られてくる＝＞DHCPアックが送られ承認される



NATとNATP
ルーターの機能の一つ。プライベートIPアドレスがあってもネット接続する時にグローバルIPアドレスに変換しなければいけない。変換方法には大きく2種類あり、NATとNAPTがある。

・NAT(ネットワーク アドレス トランスレーション)
ルーターにいくつかのグローバルIPアドレスを割り当てておき、繋げたコンピューターに割り振って通信していく方法。割り振られていた。アドレスがの数分しか接続できないデメリットがある。

・NAPT(ネットワーク アドレス プロトコル トランスレーション)
プライベートIPアドレスと一緒にポート番号も変換することでLAN内の複数のコンピューターと接続できるようになる。データを送るときはコンピューターから送られてきたIPアドレスとポート番号をルーターが管理しているIPアドレスとポート番号に切り替えて送信し、受信する時はルーターのIPアドレスとポート番号で受け取り、接続しているコンピューターのIPアドレスとポート番号に切り替えて個々にデータを流す。





４、ネットワーク機器と仮想化
イーサネットの機能と構成
イーサネットはネットワークの規格で通信速度と通信媒体で規格が決まる。
例：100BASE-TX
通信速度：左)←BASEより→(右：通信媒体
通信速度・・・MbpsやGbpsなどで表記される
通信媒体・・・銅のより対線（２本の線を合わせた物）

イーサネットでは情報を小分けにしてフレームと言う形に変え、電気信号に変換、通信媒体に送出し、宛先が繋がっているポートにフレームを転送する。
ハブ/スイッチを起点にする。イーサネットⅡでフレームの最大は1500バイトのためこれ以上のデータは1500ずつ複数回送ることになる。

ハブ/スイッチをさらに別のハブ/スイッチに接続して何段にもすることを『カスケード接続』

L2スイッチ
ハブ・スイッチ・L２スイッチはほとんど同じ意味で使われる。イーサネットを拡張するだけの物を「ハブ」、各種管理機能・VLAN機能など多機能な物を「スイッチ」、レイヤー２に当たるイーサネッのフレーム処理を明示したものが「L２スイッチ」と呼ばれる。
L2スイッチはMACアドレスを調べ、接続されているポート部イーサネットフレームを転送する。これが出来るのはポートとMACアドレスの対応を記録しているからで、この一覧を「MACアドレステーブル」という。
未登録なコンピューターあてにフレームが届くとL2スイッチはフレームが届いたポート以外の全てにそのフレームを送る。この動作を「フラッディング」という。受け取ったコンピューターが何かしら送出するとL２スイッチに送るとそれを元にMACアドレスとポート番号をテーブルに登録し、以降そこからフレームの転送先を割り出す。

①一旦、全転送②次の送信時にポート番号とMACアドレスを記録③次からそれを元に送る
【おさらい：MACアドレス→物理アドレス】


L3スイッチとルーター
【おさらい：ルーターの役割→パケットの中継と転送】
【おさらい：OSI参照モデル→L1物理層、L2データリンク層、L3ネットワーク層、L4トランスポート層、L5セッション、L6プレゼンテーション層、L7アプリケーション層】
L3スイッチはIPパケットの処理をするスイッチ。同じ処理をするものにルーターが挙げられる。
ルーターはソフトウェア処理が中心、L3スイッチはハードウェアの処理中心に行うが、近年ではルーターとスイッチの境がなっくなってきている。
・L4スイッチ
TCP・UDPの振り分け機能と負荷分散の目的で使われる。

・L3スイッチとルーターの守備範囲
ルーターはネットワークの基幹部分に使われたり、スイッチと併用して末端に近いところに使われる
L3スイッチはLANポートを多く持つためネットワークの末端に近い部分で利用される。ただしルーターとスイッチの役割を持つため、万が一故障した場合、両方の機能が失われるので対策が必要となる。

・L2〜4のスイッチのデータの振り分けの違い
L2→イーサネットのMACアドレスを見て振り分ける
L3→IPのIPアドレスを見て振り分ける
L4→TCPやUDPポート番号を見て振り分ける


無線LAN
LANケーブルの代わりに無線を使ってネットワークに接続する技術。ケーブルを使用しての通信よりは速度や安定性は劣るが接続できるところなら自由に移動できること、ケーブル接続の手間がないことがメリットとしてあげられる。また無線LANの方がセキュリティが弱くなる。
企業などでは容易に侵入されては困るのでこれをカバーするために、IEEE 802.1Xと言う厳密なにんしょうを行う仕組みを併用する必要がある。

通信方式の違いによっていくつかの規格があり、最もよく使われるのがIEEE 802.11g、IEEE 802.11ac、IEEE 802.11nの３種類。
第三者の盗聴に備えて暗号化するのが一般的だが、近年ではWPAやWPA2とAESと言う暗号アルゴリズムを併用して使われる。



ポートベースVLANとタグベースVLAN
一つの回線を擬似的に複数あるようにするのがVLAN。ポートベースLANはグループに属するポート群を独立した一つのLANのように見せる技術。家庭向けスイッチ・Wi-Fiルーターにはない機能でポートでグループ分けしていく。そのポート群を一つのLANにする。
タグベースLANはイーサネットフレームの中にVLANの番号を表す情報(タグ)を埋め込む事で、ひとつのLANケーブルの中に流れる情報をVLANごとに区別する。
タグベースVLANは、ポートベースVLANと組み合わせて使われることが多い


VPNとトンネル
VPNはインターネットの中に新たに仮想的なネットワークを作る技術。企業では、規模の小さいネットワークをインターネット経由で本社ネットワークに参加させるタイプを『LAN型』、出先からモバイル回線でオフィスのネットワークに接続するタイプを『リモート型』と言われる。
また、VPNは暗号・認証の関係で通信速度が遅くなる傾向がある。

・トンネル技術
トンネル技術はある回線の中に作り出した仮想的な通信回線の事。
プロトコルは①PPTP②L2TPがある。ここに暗号化する機能を持っているIPsecを組み合わせる。さらにIPsecは①鍵交換のプロトコル、IKE②暗号化したデータの交換をするESP、③認証と改ざんの検知をするAH、を組み合わせて使われている。


仮想化
仮想化とは物理的にネットワークやコンピューターを使って、論理的なネットワークやコンピューターを作り出す技術のこと、つまり『ネットワークの中にコンピューターやネットワークを作ること』。
・仮想化のメリット
①数や場所に制約されずに機能を利用できる
②装置や処理能力を有効活用できること
③装置単体が持つ以上の処理能力を持たせること
④スケールUP/DOWNしやすいこと




クラウド
ユーザー自身が物理的に機器を準備しなくても同等のものを用意できるシステムで、IaaS、Paas、SaaSの３種類で分けられる。
IaaS・・・コンピューターやネットワークを作り出す
Paas・・・一定の機能をサービス化して提供するもの
SaaS・・・完成したソフトウェアをネットワーク経由で提供するもの
IaaS＞Paas＞SaaSの順でIaaSから土台にして組み上げられる。



５、ネットワークのサービス
Webを支える技術
・ハイパーテキストの概念
文書の中にハイパーリンクと呼ばれる、他ドキュメントへの参照を埋め込んだものをいう。複数の文書と関連付け、より大きな情報を表すことができる。

・URL
Webに存在する文書や各種ファイルを指し示すのに使われ、大きく分けて『スキーム』『ホスト名』『パス』に分けられる。
例：
http://www.hogehoge.jp/index.html
スキーム→使用するプロトコルの種類＝http://の部分
ホスト名→ドメイン名＝www.hogehoge.jpの部分
パス→サーバー内の格納位置＝/index.htmlの部分

・静的、動的コンテンツ
静的コンテンツ→あらかじめ制作してサーバーに保存されているコンテンツのこと
例：ペライチのLPとか
動的コンテンツ→サーバーに呼び出しをリクエストするたびプログラムが動いて作り出し、アクセスのたびに結果がかわるコンテンツの事
例：アプリケーションやシステム

HTTP
WebサーバーとWebブラウザの間でWeb情報のやりとりを行うプロトコル。
動作はシンプルで１つの要求に１つの応答を返すルールになっている。
HTTPはTCPと組み合わせて使うことが多く、UDPと組み合わせることは稀。

・リクエストとレスポンス
HTTPリクエストはTCP/IPでサーバーに送るとHTTPレスポンスとして送り返す。
リクエストには①リクエスト行、②ヘッダフィールド、③メッセージ本体の部分に分かれる。
①リクエスト行→メソッドの使用
②ヘッダフィールド→補助的な情報を指定する
①〜③の処理結果は『ステータスコード』で表される。

・主なステータスコード
200→正常
401→認証が必要
404→見つからない
408→リクエスト時間切れ
500→サーバー内エラー


HTTPSとSSL/TLS
HTTPの通信を安全に行うために仕組み。HTTPS自体にはプロトコルはなく、SSLやTLS
と呼ばれるプロトコルが作り出す安全な接続を使ってHTTPによる通信を行う。
つまりHTTPのリクエストやレスポンスの内容は①暗号化される、通信内容を書き換える「改ざん」を検出することができる、③接続先のWebサーバーが本物かどうかを検証する
ことができる。

・SSL/TLSの概要
認証・暗号の鍵交換・暗号アルゴリズムを複数から選択できるようになる。どれを使うかは通信の最初の段階でクライアントとサーバーが共通に対応しているものから選択する。これを『ネゴシエーション』という。
逆に暗号強度の高いものがあってもクライアントとサーバーどちらかが対応してなければ使うことはできない。


SMTP
電子メールの配送に用いられるプロトコル。主にTCPと一緒に使われ、ポート番号25番を使う。
1回のレスポンスを返して終わるのではなく接続している間に何回かコマンドとリプライwのやりとりを行う。

【おさらい：ISP　インターネットの窓口みたいなもの】
・OP25Bとサブミッションポート
日本のインターネット接続サービスでは、ISPのネットワーク外にあるメールサーバーに対して25番ポートで接続することを禁止している。（OP25Bによる迷惑メール対策のため）
機能の流れは以下
①自分のメールサーバーにSMTPでメールを送信
②自分のメールサーバーから相手のメールサーバーにSMTPでメールが転送される
③相手のサーバーからメールボックスに入る

OP25Bが導入されて以降、ISP外にある時、①が25番ポートで接続できなくなり代わりにサブミッションと言われる587番ポートを使用することになる。このポートにはSMTP-AUTH(送信にIDとパスワードが必要になる)が設定されこのIDとパスワードを持っている人だけ送信できるようになるため、迷惑メール撲滅に効果を上げた。



POP3とIMAP4
POP3とIMAP4、共にメールボックスを読み出すプロトコルになる。メールサーバーに届けられたメールはメールボックスに保存される、それを読み出すことに使われる。
POP3は、メールをパソコンに取り込んでパソコンの中で整理や閲覧をするスタイルをとっている。そのためネットワークを切っても閲覧ができる。
通常、TCPと組み合わせて使われ、ポートは110番を使用する。
暗号化にはSSL/TLSを併用したPOP3Sもある。
IMAP4はサーバーのメールボックスに置いたまま整理・閲覧するスタイルをとっている。サーバー上にあるので読むときに必ずネットワークに接続する必要がある。ただしサーバーにアクセスできればどの端末からでも読み込めるというメリットもある。
ポート番号はTCPと併用して143番を使う。
暗号化にはSSL/TSLを組み合わせたIMAP4Sがある。


FTP
ファイル転送のためのプロトコルでHTTPと同じ役割を果たすができるが、HTTPにはない特徴もある。通常TCPと併用し転送制御と21番ポート、転送データ用に20番ポートを使用する。
このように2つの接続が独立しているため、転送途中で止めたい時などにコントロールがしやすい。

・アクティブモードとパッシブ(受動的)モード
FTPサーバーからFTPクライアントに接続しようとするが、しかし今日でのネットワークでは外部からの接続は不正侵入を防ぐために禁止されている。そのためファイルの転送ができない。
これに対応するため、FTPクライアント側から転送データ用の接続を作るパッシブモードが設けられている。

・暗号化
FTPではFTPSかSFTPが使われる。
FTPS→SSL/TSLを併用して安全に“通信”を実現する。
SFTP→SSHの仕組みを使って安全に“ファイル転送”を実現する。



SSH
サーバーやネットワーク機器に接続して対象をCUIで操作知るためのプロトコル、及びそのプログラムの名前。TCPと一緒に使用しポートは22番を使う。CUI画面では『ターミナル』や『コンソール』と呼ばれる。
SSHの一番の特徴はやりとりが暗号化されているので安全に操作できるという点になる。SSHを使えば、盗聴による情報漏洩を防ぐことができる。
ログイン方法はIDとパスワードを使うことが多いがそれに加えて、公開鍵認証も使うことができる。
【おさらい：公開鍵暗号方式】
データの暗号化と復号で別の鍵を使用する。暗号化には『公開鍵』という誰でも「見れるものを使用し、復号には『秘密鍵』とい受信者しか使えないものを使用する。
つまり送信者にこちらから『公開鍵』という鍵を渡して情報を暗号化してもらい、送信してもらう。復号には自分しか持っていない秘密鍵を用いて復号することで公開鍵が漏洩しても復号できないのでセキュリティ上より安全になる。

DNS
IPアドレスの代わりに、ドメイン名というものが使われる。ドメイン名からIPアドレスを求めること（正引き）、IPアドレスからドメイン名を求めること（逆引き）を『名前解決』という。
この名前解決がDNSの機能の一つとなる。問い合わせ応答にUDPのポート53番を使い、DNSサーバー間での情報の複製をするゾーン転送にはTCPのポート53番を使う。
また、DNSサーバーの特徴として1台で管理するのではなく複数のサーバーで名前解決を行う『分散協調処理』があげられる。

ドメイン名で通信するのではなくドメイン名でリクエストがきたらそれをIPアドレスに変換して通信を開始する。



NTP
ネットワークに繋いだコンピューターの時計を合わせるためのプロトコルでリアル性の高いUDPを使用、ポート番号123番を使う。
複数のコンピューターをネットワークで繋いで使う場合、時刻があっていることは非常に重要となる。メールの送受信やトラブル発生時のログを確認する際、時間が合っていなければ相互関係の把握が難しくなってしまう。
時刻情報を提供するのがNTPサーバーで、UTCで表す時刻情報を配信する。

・配信する仕組み
アクセスが集中すると負荷がかかってしまうので、階層的な構造をとることでこれを防止している。時刻情報の源泉には、マイクロ秒オーダーの制度を持つ原子時計・GPSなどの時刻源（タイムソース）が使われ、これをstratum(＝階層)０として位置付けたサーバーをおく。stratum０から直結したstratum１を作り時刻情報を配信、それを２、３と増やしていき会社で使われるサーバーにstratumXを設置、時刻情報を配信する。


HTTPプロキシ
インターネット上のWebサービスへアクセスする際はパソコンなどとサーバーがリクエストとレスポンスを直接やりとりするのが基本形で特に家庭用では100％この形である。しかし企業や団体などのオフィスワークではなんらかの中継用のコンピューターを間に挟んでインターネットとやりとりをする形態が使われる。その間に入って通信を取り次ぐコンピューターがプロキシである。HTTPを取り次ぐプロキシという意味で『HTTPプロキシ』と呼ばれる。
・プロキシを使う意味
アクセスは全てプロキシを仲介することになる。言い換えればプロキシが何らかの形で通信時関与できることを意味する。
通信時にプロキシが提供できる機能として、
①コンテンツのキャッシュ（Webサーバーのレンポンスの保存と返送）
②ウィルスの検出や不正侵入の防止
③有害サイトのブロック
があげられる。



サービス連携とREST API
ネットワーク同士が繋がっているのが増え、他のコンピューターがもっている機能を呼び出して使うことが可能になった。ネットワーク経由で呼び出して使うサービスやサービスを提供する事業者を『ASP』と呼ぶ。またクラウドの技術の形態の一つとしてとらえてSaaSやPaaSと呼ぶこともある。

機能をネットワーク経由で呼び出す時多く使われているのがHTTPになり、リクエストとレスポンスの考え方に則って使われる。レスポンスの形式はXMLやJSONが使われることが多く、このスタイルを『REST API』と呼ぶ。（ツイッターのアカウント情報を参照するTwitterAPIなど）



HTMLの構造とXML
HTMLと似た物でXMLというものがある。マークアップ言語を定義するための汎用的なルールを定めた物で書き方のルールが厳密に決まっている。XMLのルールに則って書かれたHTMLをXHTMLという。


文字コード
コンピューターが取り扱うことができるデータはその仕組み上、数値に限られる。その数値と文字を対応づけたものを『文字コード』という。（『文字コード　ASCII　画像』でググれば出てくる）
一般にはASCIIが使われている。しかし日本のように漢字・カタカナ・ひらがななど扱う文字が多いとASCIIでは納まらない。ASCIIでは1文字1バイトで割り当てられているが、漢字やひらがなを使うときは2バイト以上の値で文字コードを使う。このような文字コードを『マルチバイト文字』といい、漢字を表せる文字コードを通称漢字コードという。
代表的なものとして以下があげられる。
・Shift-JIS
・ECP-JP
・ISO-2022-JP
・UTF-8
ファイルの送受信者の文字コードが合っていないと文字化けが起こる。



６、ネットワークのセキュリティ
情報セキュリティの３大要素
①機密性→許可のある人だけ情報を利用でき、それ以外の人には漏らさないという性質になる。この性質の脅威となるものは、ネットワークでは盗聴など、コンピューターでは盗難や不正アクセスによる情報漏洩などが挙げられる。

②完全性→情報が「本来の内容で維持されている状態を指す。この性質の脅威となるものは、ネットワークでは通信途中の情報改ざん、コンピューターでは、不正アクセスによる情報改ざん・故障によるデータの欠落・人為的な誤修正や誤削除がある。

③可用性→情報が適切に使える状態になっていることをさす。この性質の脅威となるものは、ネットワークではアクセス集中によるサービス停止を狙うDoS攻撃などが、コンピューターでは、システム故障や停電が挙げられる。



・脅威、脆弱性、リスク
上記の３要素を維持することの妨げになる物が『リスク』といわれる。
『脅威』とは何らかの危害を加える恐れのある要員、『脆弱性』とは脅威に内在する弱みを指す。脅威と脆弱性の程度で『リスク』の程度が決まり、脅威が脆弱性をつくことで危害を受ける可能性がリスクとなる。


